<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>龍運轩ᝰ美食中心 · LYX Food Center</title>
<style>
:root{--bg:#f7f8fb;--card:#fff;--ink:#0f172a;--mut:#6b7280;--line:#e5e7eb;--brand:#0ea5e9;--ok:#059669;--accent:#f59e0b;--shadow:0 8px 24px rgba(2,8,23,.06)}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
header{background:linear-gradient(180deg,#0ea5e9,#0284c7);color:#fff;padding:12px;position:sticky;top:0;z-index:9}
h1{margin:0;font-size:20px;display:flex;gap:10px;align-items:baseline}
h1 small{opacity:.9}
.lang{margin-top:8px;display:flex;gap:8px}
.lang button{padding:6px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.4);background:rgba(255,255,255,.15);color:#fff;font-weight:700;cursor:pointer}
.lang button.active{background:#fff;color:#0b3a55}
.wrap{display:grid;grid-template-columns:2fr 1fr;gap:12px;padding:12px;max-width:1200px;margin:auto}
@media(max-width:900px){.wrap{grid-template-columns:1fr}}
.panel{background:var(--card);border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);padding:10px}
.item{border:1px solid var(--line);border-radius:10px;padding:10px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
.qty{min-width:40px;text-align:center;font-weight:900}
.btn{padding:6px 12px;border:1px solid var(--line);border-radius:8px;background:#f3f4f6;cursor:pointer}
.btn.add{background:var(--brand);color:#fff;font-weight:800}
.btn.small{font-size:18px;padding:6px 12px}
summary{cursor:pointer;font-weight:bold;padding:8px;background:#fff7ed;border-left:4px solid var(--accent);border-radius:10px;margin-bottom:6px}
</style>
</head>
<body>
<header>
  <h1><span data-i18n="appName">龍運轩ᝰ美食中心</span> <small data-i18n="appNameEn">LYX Food Center</small></h1>
  <div class="lang">
    <button id="btn-zh" onclick="applyLang('zh')">中文</button>
    <button id="btn-en" onclick="applyLang('en')">English</button>
    <button id="btn-vi" onclick="applyLang('vi')">Tiếng Việt</button>
  </div>
</header>

<div class="wrap">
  <!-- 左：菜单 -->
  <section class="panel">
    <h3 data-i18n="orderTitle">点餐 / Order</h3>

    <details open><summary data-i18n="cat_wonton">龍兴记ᝰ云吞面</summary><div id="cat-wonton"></div></details>
    <details><summary data-i18n="cat_drinks">饮料</summary><small data-i18n="rule">冰 +RM0.20，罐装水 RM3.00</small><div id="cat-drinks"></div></details>
    <details><summary data-i18n="cat_auntie">婶婶档</summary><div id="cat-auntie"></div></details>
    <details><summary data-i18n="cat_gx">广西卷筒粉</summary><div id="cat-gx"></div></details>
  </section>

  <!-- 右：订单 -->
  <aside class="panel">
    <h3 data-i18n="cartTitle">订单 / Cart</h3>
    <div id="cart"></div>
    <textarea id="note" placeholder="备注 Notes" style="width:100%;margin-top:8px"></textarea>
    <button class="btn add" style="margin-top:8px;width:100%" onclick="finishAndSend()" data-i18n="complete">完成并统计</button>
    <div style="margin-top:10px">
      <div><span data-i18n="ordersCount">订单数</span>: <b id="kpi-orders">0</b></div>
      <div><span data-i18n="itemsSold">件数</span>: <b id="kpi-items">0</b></div>
      <div><span data-i18n="salesAmount">销售额</span>: <b id="kpi-sales">RM 0.00</b></div>
    </div>
    <details style="margin-top:10px"><summary data-i18n="breakdown">分类统计</summary><div id="breakdown"></div></details>
    <button class="btn" style="margin-top:6px" onclick="deleteWithPwd()" data-i18n="deleteNeedPwd">删单（需密码）</button>
  </aside>
</div>

<script>
/* ===== 多语言 ===== */
const i18n={
  zh:{appName:"龍運轩ᝰ美食中心",appNameEn:"LYX Food Center",orderTitle:"点餐 / Order",cartTitle:"订单 / Cart",cat_wonton:"龍兴记ᝰ云吞面",cat_drinks:"饮料",cat_auntie:"婶婶档",cat_gx:"广西卷筒粉",rule:"冰 +RM0.20，罐装水 RM3.00",complete:"完成并统计",ordersCount:"订单数",itemsSold:"件数",salesAmount:"销售额",breakdown:"分类统计",deleteNeedPwd:"删单（需密码）"},
  en:{appName:"LYX Food Center",appNameEn:"LYX Food Center",orderTitle:"Order",cartTitle:"Cart",cat_wonton:"Wonton Noodles",cat_drinks:"Drinks",cat_auntie:"Auntie's Stall",cat_gx:"Guangxi Rolls",rule:"Iced +RM0.20, Canned RM3.00",complete:"Finish & Save",ordersCount:"Orders",itemsSold:"Items",salesAmount:"Sales",breakdown:"Breakdown",deleteNeedPwd:"Delete (password)"},
  vi:{appName:"Trung Tâm Ẩm Thực LYX",appNameEn:"LYX Food Center",orderTitle:"Gọi món",cartTitle:"Giỏ hàng",cat_wonton:"Mì hoành thánh",cat_drinks:"Nước uống",cat_auntie:"Gian hàng Cô",cat_gx:"Bánh cuốn Quảng Tây",rule:"Đá +RM0.20, nước lon RM3.00",complete:"Hoàn tất & lưu",ordersCount:"Đơn hàng",itemsSold:"Số món",salesAmount:"Doanh thu",breakdown:"Thống kê",deleteNeedPwd:"Xóa (mật khẩu)"}
};
let currentLang=localStorage.getItem("lang")||"zh";
function t(k){return (i18n[currentLang]||i18n.zh)[k]||k;}
function applyLang(lang){currentLang=lang;localStorage.setItem("lang",lang);
  document.querySelectorAll("[data-i18n]").forEach(el=>{el.textContent=t(el.dataset.i18n)});
  renderAll();showKpis();
  document.getElementById("btn-zh").classList.toggle("active",lang==="zh");
  document.getElementById("btn-en").classList.toggle("active",lang==="en");
  document.getElementById("btn-vi").classList.toggle("active",lang==="vi");
}

/* ===== 菜单 ===== */
const WONTON=[{id:"w1",name:{zh:"云吞面汤",en:"Wonton Soup Noodle",vi:"Mì hoành thánh nước"},price:6.5}];
const DRINKS=[{id:"d1",name:{zh:"咖啡(热)",en:"Coffee (Hot)",vi:"Cà phê (Nóng)"},price:2.3},{id:"d2",name:{zh:"咖啡(冰)",en:"Coffee (Iced)",vi:"Cà phê (Đá)"},price:2.5},{id:"d_canned",name:{zh:"罐装水",en:"Canned Drink",vi:"Nước lon"},price:3}];
const AUNTIE=[{id:"a1",name:{zh:"鸡肉粥",en:"Chicken Congee",vi:"Cháo gà"},price:6}];
const GX=[{id:"g1",name:{zh:"素粉",en:"Plain Roll",vi:"Bánh cuốn chay"},price:1},{id:"g2",name:{zh:"肉卷筒粉",en:"Meat Roll",vi:"Bánh cuốn thịt"},price:3}];

/* ===== 渲染 ===== */
const cart={items:{}};
function itemCard(it){const id=it.id;return `<div class="item"><span>${it.name[currentLang]} RM${it.price}</span><div><button class="btn small" onclick="dec('${id}')">-</button><span class="qty" id="qty-${id}">${cart.items[id]||0}</span><button class="btn small" onclick="inc('${id}')">+</button></div></div>`;}
function renderCat(id,list){document.getElementById(id).innerHTML=list.map(itemCard).join("");}
function renderAll(){renderCat("cat-wonton",WONTON);renderCat("cat-drinks",DRINKS);renderCat("cat-auntie",AUNTIE);renderCat("cat-gx",GX);renderCart();}
function inc(id){cart.items[id]=(cart.items[id]||0)+1;renderCart();}
function dec(id){if(!cart.items[id])return;cart.items[id]--;if(cart.items[id]<=0)delete cart.items[id];renderCart();}
function renderCart(){const c=document.getElementById("cart");c.innerHTML="";let total=0;for(const id in cart.items){const qty=cart.items[id];const it=[...WONTON,...DRINKS,...AUNTIE,...GX].find(x=>x.id===id);if(!it)continue;const line=it.price*qty;total+=line;c.innerHTML+=`<div>${it.name[currentLang]} × ${qty} = RM${line.toFixed(2)}</div>`;}c.innerHTML+=`<div><b>Total RM${total.toFixed(2)}</b></div>`;}

/* ===== 统计 ===== */
function todayKey(){return "lyx_stats_"+new Date().toISOString().slice(0,10);}
function loadStats(){return JSON.parse(localStorage.getItem(todayKey())||'{"orders":0,"items":0,"sales":0,"breakdown":{}}');}
function saveStats(st){localStorage.setItem(todayKey(),JSON.stringify(st));showKpis();renderBreakdown();}
function showKpis(){const st=loadStats();document.getElementById("kpi-orders").textContent=st.orders;document.getElementById("kpi-items").textContent=st.items;document.getElementById("kpi-sales").textContent="RM "+st.sales.toFixed(2);}
function renderBreakdown(){const st=loadStats();const cats={wonton:"云吞面",drinks:"饮料",auntie:"婶婶档",gx:"广西卷筒粉"};let html="";for(const k in cats){const r=st.breakdown[k]||{qty:0,revenue:0};html+=`<div>${cats[k]}: ${r.qty} 件 / RM ${r.revenue.toFixed(2)}</div>`;}document.getElementById("breakdown").innerHTML=html;}

/* ===== 下单 ===== */
function finishAndSend(){let subtotal=0,items=0;const st=loadStats();for(const id in cart.items){const qty=cart.items[id];items+=qty;const it=[...WONTON,...DRINKS,...AUNTIE,...GX].find(x=>x.id===id);if(!it)continue;subtotal+=it.price*qty;let cat=id[0]==="w"?"wonton":id[0]==="d"?"drinks":id[0]==="a"?"auntie":"gx";if(!st.breakdown[cat])st.breakdown[cat]={qty:0,revenue:0};st.breakdown[cat].qty+=qty;st.breakdown[cat].revenue+=it.price*qty;}st.orders++;st.items+=items;st.sales+=subtotal;saveStats(st);cart.items={};renderCart();}
const DELETE_PWD="Lyx115599$";function deleteWithPwd(){const p=prompt("密码 Password");if(p!==DELETE_PWD){alert("错误 Wrong password");return;}localStorage.removeItem(todayKey());alert("已删除");showKpis();renderBreakdown();}

/* ===== 启动 ===== */
document.addEventListener("DOMContentLoaded",()=>{applyLang(currentLang);});
</script>
</body>
</html>
