<!DOCTYPE html>
<html lang="zh" translate="no">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="color-scheme" content="dark">
    <meta name="description" content="é¾å…´è®°äº‘åé¢ç‚¹å•ç³»ç»Ÿï¼Œæ”¯æŒå¤šè¯­è¨€ã€ç¦»çº¿ä½¿ç”¨å’Œè®¢å•ç»Ÿè®¡">
    <title>é¾å…´è®°á°äº‘åé¢ Â· ç‚¹å•ç³»ç»Ÿ (V2.15e æœæ±+åŠ å¥¶ Â· åˆ†ç±»/ç»“å•/ç»Ÿè®¡/æ‰“å°)</title>
    <link rel="manifest" href="/fail/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #740c10;
            --bg-grad: linear-gradient(180deg, #740c10 0%, #660a0e 40%, #54090c 100%);
            --ink: #ffeecf;
            --ink-strong: #fff8dd;
            --line: #f5d78a;
            --brand: #ffd86b;
            --brand-ink: #5a3b00;
            --mut: #f7e7bb;
            --shadow: 0 16px 40px rgba(0, 0, 0, .40);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html,
        body {
            margin: 0;
            height: 100%;
            background: var(--bg);
            background-image: var(--bg-grad);
            color: var(--ink);
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans SC", "PingFang SC", sans-serif;
        }

        .container {
            max-width: 980px;
            margin: 0 auto;
            padding: 14px;
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));
            border: 1.5px solid var(--line);
            border-radius: 18px;
            padding: 14px;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 10;
            background: linear-gradient(180deg, rgba(0, 0, 0, .35), rgba(0, 0, 0, 0));
            backdrop-filter: saturate(120%) blur(6px);
            border-bottom: 1px solid rgba(241, 213, 138, .35);
        }

        .head {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
        }

        header .logo {
            height: 70px;
            width: auto;
            max-width: 205px;
            border-radius: 10px;
            display: block;
            box-shadow: 0 8px 20px rgba(0, 0, 0, .4);
        }

        .langs {
            margin-left: auto;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .langs button {
            border: 1.5px solid var(--line);
            background: var(--brand);
            color: var(--brand-ink);
            padding: 8px 14px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 900;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
        }

        .langs button.active {
            background: transparent;
            color: var(--ink);
            box-shadow: 0 0 0 2px rgba(241, 213, 138, .6) inset;
        }

        label {
            display: block;
            margin: 8px 0 6px;
            font-weight: 800;
            color: var(--ink-strong);
        }

        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1.5px solid var(--line);
            background: rgba(0, 0, 0, .18);
            color: var(--ink);
            font-weight: 900;
        }
        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 680px) {
            .row {
                grid-template-columns: 1fr;
            }
        }

        #tables-quick {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 6px;
        }

        .table-chip {
            border: 1.5px solid var(--line);
            border-radius: 10px;
            padding: 6px 10px;
            background: rgba(255, 255, 255, .06);
            color: var(--ink);
            cursor: pointer;
            min-width: 44px;
            text-align: center;
            font-weight: 900;
        }

        .table-chip.active {
            background: var(--brand);
            color: var(--brand-ink);
        }

        .cat {
            margin: 14px 0;
            border: 1.5px dashed var(--line);
            border-radius: 18px;
            overflow: hidden;
        }

        .cat-h {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            background: rgba(255, 255, 255, .06);
            cursor: pointer;
        }

        .cat-h h3 {
            margin: 0;
            font-size: 18px;
            letter-spacing: .3px;
            color: var(--ink-strong);
        }

        .cat-b {
            display: none;
            padding: 12px 12px 16px;
            background: rgba(0, 0, 0, .08);
        }

        .cat-b.open {
            display: block;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 10px;
        }

        @media (max-width: 680px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .item {
            background: rgba(255, 255, 255, .06);
            border: 1.5px solid var(--line);
            border-radius: 14px;
            padding: 12px;
        }

        .item h4 {
            margin: 0 0 6px;
            font-size: 16px;
            color: var(--ink-strong);
        }

        .item .price {
            font-weight: 900;
            color: var(--mut);
        }

        .item .extra {
            font-size: 12px;
            opacity: .9;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .act {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }

        .btn {
            border: 2px solid var(--line);
            background: var(--brand);
            color: var(--brand-ink);
            padding: 10px 14px;
            border-radius: 12px;
            cursor: pointer;
            min-width: 44px;
            text-align: center;
            font-weight: 900;
        }

        .btn.ghost {
            background: transparent;
            color: var(--ink);
        }

        .btn.full {
            width: 100%;
        }

        .qty {
            min-width: 54px;
            text-align: center;
            font-weight: 900;
            font-size: 18px;
            color: #fff;
        }

        .cart {
            margin-top: 16px;
        }

        .cart table {
            width: 100%;
            border-collapse: collapse;
            border: 1.5px solid var(--line);
            overflow: hidden;
            border-radius: 14px;
        }

        .cart th,
        .cart td {
            padding: 10px;
            border-bottom: 1px dashed rgba(241, 213, 138, .55);
            text-align: left;
        }

        .cart tfoot td {
            font-weight: 900;
        }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        @media (max-width: 680px) {
            .actions {
                grid-template-columns: 1fr;
            }
        }

        .kpis {
            margin-top: 12px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        @media (max-width: 680px) {
            .kpis {
                grid-template-columns: 1fr 1fr;
            }
        }

        .kpis .chip {
            background: rgba(0, 0, 0, .12);
            border: 1.5px solid var(--line);
            border-radius: 14px;
            padding: 12px;
            text-align: center;
        }

        @media print {
            body {
                background: #fff;
                color: #000;
            }

            header,
            .no-print,
            .a4-menu,
            #checkoutBtn {
                display: none !important;
            }

            .ticket {
                display: block;
            }
        }

        .ticket {
            display: none;
        }

        .ticket h2 {
            margin: 0 0 8px;
        }

        .hr {
            height: 1px;
            background: repeating-linear-gradient(to right, #000 0, #000 6px, transparent 6px, transparent 12px);
            opacity: .5;
            margin: 8px 0;
        }

        .a4-menu {
            display: none;
        }

        @media print {
            .a4-menu {
                display: block;
                width: 210mm;
                min-height: 297mm;
                margin: 0 auto;
                padding: 18mm 16mm;
                background: #7a0e12;
                color: #f8e7b0;
                border: 2mm solid #f1d58a;
                border-radius: 12px;
                box-shadow: var(--shadow);
                font-family: "Noto Serif SC", "Playfair Display", serif;
            }

            .a4-menu h1 {
                margin: .2em 0 .4em 0;
                font-size: 28px;
                letter-spacing: .8px;
                text-align: center;
            }

            .a4-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 8mm;
            }

            .a4-card {
                border: 1.6px solid var(--line);
                border-radius: 10px;
                padding: 6mm;
                background: rgba(255, 255, 255, .05);
            }

            .a4-title {
                font-weight: 800;
                font-size: 16px;
                margin: 0 0 4mm 0;
            }

            .a4-li {
                display: flex;
                justify-content: space-between;
                margin: 2mm 0;
            }

            .a4-li b {
                font-weight: 800;
            }
        }

        #checkoutBtn {
            position: fixed;
            right: 14px;
            bottom: 14px;
            z-index: 9999;
            box-shadow: 0 10px 26px rgba(0, 0, 0, .35);
            transform: scale(1.5);
            transform-origin: bottom right;
        }

        #statsPanel .row {
            grid-template-columns: 1fr 1fr;
        }

        .toast {
            position: fixed;
            left: 50%;
            bottom: 88px;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, .7);
            color: #fff;
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 800;
            z-index: 99999;
            display: none;
        }

        .toast.show {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/fail/service-worker.js', { scope: '/fail/' })
                .then(reg => console.log('Service Worker æ³¨å†ŒæˆåŠŸ:', reg))
                .catch(err => console.error('Service Worker æ³¨å†Œå¤±è´¥:', err));
        }
    </script>
    
    <header class="shadow">
        <div class="head container">
            <img class="logo" src="/fail/logo.png" alt="LYX" onerror="this.style.display='none'">
            <div class="langs">
                <button data-lang="zh" class="active">ä¸­æ–‡</button>
                <button data-lang="en">English</button>
                <button data-lang="vi">Tiáº¿ng Viá»‡t</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="card">
            <div class="row">
                <div>
                    <label data-i="table_label">æ¡Œå·</label>
                    <input id="tableNo" type="text" placeholder="01 / 02 / æ‰“åŒ…">
                    <div id="tables-quick"><span class="table-chip" data-table="æ‰“åŒ…">æ‰“åŒ…</span></div>
                </div>
                <div>
                    <label data-i="type_label">ç”¨é¤æ–¹å¼</label>
                    <select id="type">
                        <option value="dinein" data-i="dinein" selected>å ‚é£Ÿ</option>
                        <option value="takeaway" data-i="takeaway">æ‰“åŒ…</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="cats"></div>

        <div class="cart card">
            <h3 data-i="cart">è®¢å• / Cart</h3>
            <table id="cartTable">
                <thead>
                    <tr>
                        <th data-i="item">å“é¡¹</th>
                        <th data-i="qty">æ•°é‡</th>
                        <th data-i="price">é‡‘é¢</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr>
                        <td colspan="2" data-i="total">åˆè®¡ Total</td>
                        <td id="total">RM 0.00</td>
                    </tr>
                </tfoot>
            </table>

            <label style="margin-top:10px" data-i="note_label">å¤‡æ³¨</label>
            <textarea id="note" placeholder="ä¾‹å¦‚ï¼šå°‘ç”œ / å°‘å†° / åŠ è¾£" data-i-ph="note_ph"></textarea>

            <div class="actions no-print">
                <button class="btn full" id="statsBtn">ä»Šæ—¥æ˜ç»†ç»Ÿè®¡</button>
            </div>

            <div class="kpis no-print">
                <div class="chip">
                    <div data-i="k1">è®¢å•ç¬”æ•°</div>
                    <div id="k_orders" style="font-weight:900;font-size:18px">0</div>
                </div>
                <div class="chip">
                    <div data-i="k2">å”®å‡ºä»¶æ•°</div>
                    <div id="k_items" style="font-weight:900;font-size:18px">0</div>
                </div>
                <div class="chip">
                    <div data-i="k3">é”€å”®é‡‘é¢</div>
                    <div id="k_amount" style="font-weight:900;font-size:18px">RM 0.00</div>
                </div>
            </div>
        </div>

        <div class="card no-print" id="statsPanel" style="display:none; margin-top:12px">
            <h3 data-i="stats_title">ç»Ÿè®¡ Â· æŒ‰æ—¥æœŸ</h3>
            <div class="row">
                <div>
                    <label>æ—¥æœŸ</label>
                    <input type="date" id="statDate">
                </div>
                <div>
                    <label>æ“ä½œ</label>
                    <button class="btn full" id="calcBtn">ç»Ÿè®¡å¹¶å‘é€ WhatsApp</button>
                </div>
            </div>
            <div id="statResult" style="margin-top:10px; white-space: pre-wrap; font-family: monospace;"></div>
            <button class="btn full ghost" id="resetKPI" style="margin-top:10px;">é‡ç½®ä»Šæ—¥ç´¯è®¡</button>
        </div>

        <div class="ticket">
            <h2 id="t_title">é¾å…´è®°á°äº‘åé¢ Â· å°ç¥¨</h2>
            <div id="t_shop"></div><div class="hr"></div>
            <div id="t_info"></div><div class="hr"></div>
            <div id="t_items"></div><div class="hr"></div>
            <div id="t_total"></div>
            <div data-i="print_thanks">è°¢è°¢æƒ é¡¾ Â· Terima kasih</div>
        </div>

        <button id="checkoutBtn" class="btn no-print">ç»“å•</button>
    </div>

    <div class="toast" id="toast">å·²æ·»åŠ å¤‡æ³¨ï¼šåŠ å¥¶</div>

    <script>
        /* ===== â‘  å›½é™…åŒ– (I18N) é…ç½® ===== */
        let LANG = 'zh';
        const I18N = {
            table_label: { zh: "æ¡Œå·", en: "Table", vi: "BÃ n" },
            type_label: { zh: "ç”¨é¤æ–¹å¼", en: "Service Type", vi: "HÃ¬nh thá»©c" },
            dinein: { zh: "å ‚é£Ÿ", en: "Dine-in", vi: "Ä‚n táº¡i chá»—" },
            takeaway: { zh: "æ‰“åŒ…", en: "Takeaway", vi: "Mang Ä‘i" },
            cart: { zh: "è®¢å• / Cart", en: "Cart", vi: "Giá» hÃ ng" },
            item: { zh: "å“é¡¹", en: "Item", vi: "MÃ³n" },
            qty: { zh: "æ•°é‡", en: "Qty", vi: "SL" },
            price: { zh: "é‡‘é¢", en: "Amount", vi: "Tiá»n" },
            total: { zh: "åˆè®¡ Total", en: "Total", vi: "Tá»•ng" },
            note_label: { zh: "å¤‡æ³¨", en: "Note", vi: "Ghi chÃº" },
            note_ph: { zh: "ä¾‹å¦‚ï¼šå°‘ç”œ / å°‘å†° / åŠ è¾£", en: "e.g. less sweet / less ice / spicy", vi: "vd: Ã­t ngá»t / Ã­t Ä‘Ã¡ / cay" },
            submit: { zh: "å‘é€åˆ° WhatsApp", en: "Send to WhatsApp", vi: "Gá»­i qua WhatsApp" },
            print: { zh: "æ‰“å°å°ç¥¨", en: "Print Ticket", vi: "In hoÃ¡ Ä‘Æ¡n" },
            export: { zh: "å¯¼å‡ºæœ¬å• CSV", en: "Export this order CSV", vi: "Xuáº¥t CSV (Ä‘Æ¡n nÃ y)" },
            k1: { zh: "è®¢å•ç¬”æ•°", en: "Orders", vi: "Sá»‘ Ä‘Æ¡n" },
            k2: { zh: "å”®å‡ºä»¶æ•°", en: "Items", vi: "Máº·t hÃ ng" },
            k3: { zh: "é”€å”®é‡‘é¢", en: "Sales", vi: "Doanh thu" },
            add: { zh: "+1", en: "+1", vi: "+1" },
            minus: { zh: "-1", en: "-1", vi: "-1" },
            expand: { zh: "ç‚¹å‡»å±•å¼€/æ”¶èµ·", en: "Expand/Collapse", vi: "Má»Ÿ/ÄÃ³ng" },
            cat_wonton: { zh: "ğŸœ äº‘åé¢", en: "Wonton Noodles", vi: "MÃ¬ hoÃ nh thÃ¡nh" },
            cat_drinks: { zh: "ğŸ¥¤ é¥®æ–™ï¼ˆå†°é¥® +RM0.20ï¼Œç½è£…æ°´é™¤å¤–ï¼‰", en: "Drinks", vi: "Äá»“ uá»‘ng" },
            cat_roti: { zh: "ğŸ Roti", en: "Roti", vi: "Roti" },
            cat_auntie: { zh: "ğŸ² å©¶å©¶æ¡£ï¼ˆå®¶å¸¸å°ç‚’ Â· ç²¥ç²‰é¢é¥­ï¼‰", en: "Auntie Stall", vi: "Quáº§y CÃ´" },
            cat_gx: { zh: "ğŸ¥Ÿ å¹¿è¥¿å·ç­’ç²‰ï¼ˆå¤æ—©é£å‘³ï¼‰", en: "Guangxi Rice Rolls", vi: "BÃ¡nh cuá»‘n Quáº£ng TÃ¢y" },
            cat_juice: { zh: "ğŸ¹ æœæ±", en: "Juice", vi: "NÆ°á»›c Ã©p" },
            print_thanks: { zh: "è°¢è°¢æƒ é¡¾", en: "Thank you", vi: "Cáº£m Æ¡n" },
            stats_title: { zh: "ç»Ÿè®¡ Â· æŒ‰æ—¥æœŸ", en: "Stats by Date", vi: "Thá»‘ng kÃª theo ngÃ y" },
            hot: { zh: "çƒ­", en: "Hot", vi: "NÃ³ng" },
            ice: { zh: "å†°", en: "Ice", vi: "Láº¡nh" },
        };
        function t(k) { return (I18N[k] && I18N[k][LANG]) || k; }
        function applyI18N() {
            document.querySelectorAll('[data-i]').forEach(el => el.textContent = t(el.getAttribute('data-i')));
            document.querySelectorAll('[data-i-ph]').forEach(el => el.placeholder = t(el.getAttribute('data-i-ph')));
        }
    </script>
    
    <script>
        /* ===== â‘¡ èœå•æ•°æ® (MENU) ===== */
        // åŠ¨æ€æ‹‰å–æ›¿æ¢MENU
fetch("https://script.google.com/macros/s/AKfycbzVVc7M9es9BjCQ0uAN3ytSvm1x0LkZZ_dJgh5EL4MuPgNDXBVLu7anUXDwxjQq9El/exec?ts=" + Date.now())
  .then(res => res.json())
  .then(data => { MENU = data; renderMenu(); });

/* åŸæœ¬ç¡¬ç¼–ç èœå•å·²ç§»é™¤ */
// const MENU = [
            { key: 'cat_wonton', sections: [{ title: '', items: [
                { name: 'äº‘åé¢ï¼ˆå°ï¼‰', price: 6.50 },
                { name: 'äº‘åé¢ï¼ˆä¸­ï¼‰', price: 7.30 },
                { name: 'äº‘åé¢ï¼ˆå¤§ï¼‰', price: 8.00 },
                { name: 'äº‘å å¹²æï¼ˆ1 setï¼‰', price: 5.00 },
                { name: 'äº‘å æ±¤ï¼ˆ1 setï¼‰', price: 5.00 },
                { name: 'åŠ æ–™ï¼šäº‘å Ã—3', price: 1.00 },
            ]}]},
            { key: 'cat_drinks', sections: [{ title: '', items: [
                { name: 'å’–å•¡ï¼ˆçƒ­ï¼‰', price: 2.30 },
                { name: 'å’–å•¡ï¼ˆå†°ï¼‰', price: 2.50 },
                { name: 'å’–å•¡Cï¼ˆçƒ­ï¼‰', price: 2.60 },
                { name: 'å’–å•¡Cï¼ˆå†°ï¼‰', price: 2.80 },
                { name: 'å’–å•¡Oï¼ˆçƒ­ï¼‰', price: 2.00 },
                { name: 'å’–å•¡Oï¼ˆå†°ï¼‰', price: 2.20 },
                { name: 'å¥¶èŒ¶ï¼ˆçƒ­ï¼‰', price: 2.30 },
                { name: 'å¥¶èŒ¶ï¼ˆå†°ï¼‰', price: 2.50 },
                { name: 'å¥¶èŒ¶Cï¼ˆçƒ­ï¼‰', price: 2.60 },
                { name: 'å¥¶èŒ¶Cï¼ˆå†°ï¼‰', price: 2.80 },
                { name: 'å¥¶èŒ¶å’¸Cï¼ˆçƒ­ï¼‰', price: 2.60 },
                { name: 'å¥¶èŒ¶å’¸Cï¼ˆå†°ï¼‰', price: 2.80 },
                { name: 'å¥¶èŒ¶Oï¼ˆçƒ­ï¼‰', price: 2.00 },
                { name: 'å¥¶èŒ¶Oï¼ˆå†°ï¼‰', price: 2.20 },
                { name: 'Nescafeï¼ˆçƒ­ï¼‰', price: 2.80 },
                { name: 'Nescafeï¼ˆå†°ï¼‰', price: 3.00 },
                { name: 'Miloï¼ˆçƒ­ï¼‰', price: 2.60 },
                { name: 'Miloï¼ˆå†°ï¼‰', price: 2.80 },
                { name: 'Milo Cï¼ˆçƒ­ï¼‰', price: 2.80 },
                { name: 'Milo Cï¼ˆå†°ï¼‰', price: 3.00 },
                { name: 'Milo Oï¼ˆçƒ­ï¼‰', price: 2.60 },
                { name: 'Milo Oï¼ˆå†°ï¼‰', price: 2.80 },
                { name: 'Nesloï¼ˆçƒ­ï¼‰', price: 2.80 },
                { name: 'Nesloï¼ˆå†°ï¼‰', price: 3.00 },
                { name: 'é¸³é¸¯ï¼ˆçƒ­ï¼‰', price: 2.80 },
                { name: 'é¸³é¸¯ï¼ˆå†°ï¼‰', price: 3.00 },
                { name: 'Nestleï¼ˆçƒ­ï¼‰', price: 2.80 },
                { name: 'é’“é±¼ â€œèŒ¶åŒ…â€', price: 1.00 },
                { name: 'å‡‰èŒ¶ï¼ˆçƒ­ï¼‰', price: 1.50 },
                { name: 'å‡‰èŒ¶ï¼ˆå†°ï¼‰', price: 1.70 },
                { name: 'ç‰ç±³ï¼ˆçƒ­ï¼‰', price: 1.50 },
                { name: 'ç‰ç±³ï¼ˆå†°ï¼‰', price: 1.70 },
                { name: 'ç½è£…æ°´', price: 2.50 },
            ]}]},
            { key: 'cat_roti', sections: [{ title: '', items: [
                { name: 'Roti', price: 2.00 },
                { name: 'Roti Butter', price: 2.50 },
                { name: 'ç”Ÿç†Ÿè›‹ â€œSetâ€', price: 2.40 }
            ]}]},
            { key: 'cat_juice', sections: [{ title: '', items: [
                { name: 'è‹¹æœæ±', price: 5.00 },
                { name: 'æ©™æ±', price: 5.00 },
                { name: 'èåœæ±', price: 5.00 },
                { name: 'è¥¿ç“œæ±', price: 5.00 },
                { name: 'èœœç“œæ±', price: 5.00 },
            ]}]},
            { key: 'cat_auntie', sections: [{ title: '', items: [
                { name: 'è‹¦ç“œç±³ç²‰', price: 6.00 },
                { name: 'Nasi Lemakï¼ˆè›‹ï¼‰', price: 3.00 },
                { name: 'Nasi Lemakï¼ˆé¸¡ï¼‰', price: 6.00 },
                { name: 'é¢ç²‰ç³•', price: 6.00 },
                { name: 'çº¢çƒ§é¥­', price: 6.00 },
                { name: 'é±¼ç²¥ï¼ˆçŒªè‚‰ï¼‰', price: 6.00 },
                { name: 'é±¼ç²¥ï¼ˆé¸¡è‚‰ï¼‰', price: 6.00 },
                { name: 'é¢çº¿', price: 6.00 },
                { name: 'å¤è‚‰é¥­', price: 6.00 },
                { name: 'æœæ¡æ±¤', price: 6.00 },
                { name: 'åŠ çš®è›‹', price: 1.00 },
                { name: 'é…¸ç¬‹ç“œ', price: 1.50 },
                { name: 'é…¸ç¾Šè§’è±†', price: 1.50 },
                { name: 'é…¸è‹¦ç“œ', price: 1.50 },
                { name: 'é…¸è±†è…', price: 1.50 },
                { name: 'ç‚¸é¸¡ç¿…è†€', price: 3.00 },
                { name: 'ç…é¸¡è›‹', price: 1.00 },
            ]}]},
            { key: 'cat_gx', sections: [{ title: '', items: [
                { name: 'ç´ ç²‰ (kosong)', price: 1.00 },
                { name: 'è”¬èœå·ç­’ç²‰', price: 2.00 },
                { name: 'èœåŠ è‚‰å·ç­’ç²‰', price: 3.00 },
                { name: 'è‚‰å·ç­’ç²‰', price: 3.00 },
                { name: 'å…¨å®¶ç¦å·ç­’ç²‰', price: 4.00 },
                { name: 'æ˜¥å·', price: 1.00 },
                { name: 'èŠ‹å¤´ç±³ç³•', price: 1.00 },
            ]}]},
        ];
    </script>
        
    <script>
        /* ===== â‘¢ èœå•æ„å»º (åŠ¨æ€ç”ŸæˆDOM) ===== */
        const catsEl = document.getElementById('cats');
        const NAME_TO_CAT = new Map();

        function escapeHTML(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function parseDrinkName(n) {
            const m = n.match(/^([\u4e00-\u9fa5A-Za-z ]+?)(?:\s?(C|O|å’¸C))?(?:ï¼ˆ(çƒ­|å†°)ï¼‰)?$/);
            if (!m) return { base: n, variant: 'é»˜è®¤', temp: 'é»˜è®¤' };
            return { base: m[1].trim(), variant: m[2] || 'é»˜è®¤', temp: m[3] || 'é»˜è®¤' };
        }

        function renderMenu() {
            catsEl.innerHTML = '';
            MENU.forEach((cat) => {
                const wrap = document.createElement('div');
                wrap.className = 'cat card';
                wrap.innerHTML = `<div class="cat-h" data-toggle tabindex="0"><h3>${t(cat.key)}</h3><div style="opacity:.8">${t('expand')}</div></div><div class="cat-b"><div class="grid"></div></div>`;
                const grid = wrap.querySelector('.grid');

                if (cat.key === 'cat_drinks') {
                    const all = cat.sections.flatMap(s => s.items);
                    const groups = {};
                    all.forEach(it => {
                        const p = parseDrinkName(it.name);
                        groups[p.base] = groups[p.base] || {};
                        groups[p.base][p.variant] = groups[p.base][p.variant] || { hot: null, ice: null, default: null };
                        if (p.temp === 'çƒ­') groups[p.base][p.variant].hot = { price: it.price, full: `${p.base}${p.variant==='é»˜è®¤'?'':' '+p.variant}ï¼ˆçƒ­ï¼‰` };
                        if (p.temp === 'å†°') groups[p.base][p.variant].ice = { price: it.price, full: `${p.base}${p.variant==='é»˜è®¤'?'':' '+p.variant}ï¼ˆå†°ï¼‰` };
                        if (p.temp === 'é»˜è®¤') groups[p.base][p.variant].default = { price: it.price, full: it.name };
                    });

                    Object.keys(groups).forEach(base => {
                        const variants = groups[base];
                        const variantKeys = Object.keys(variants).sort((a,b)=>{ const order = {'é»˜è®¤':0,'C':1,'O':2,'å’¸C':3}; return (order[a]??9)-(order[b]??9); });
                        const baseId = `base-${base.replace(/\s+/g,'_')}`;
                        const baseCard = document.createElement('div');
                        baseCard.className = 'item';
                        baseCard.innerHTML = `
                          <h4 data-base-toggle="${baseId}" style="cursor:pointer" tabindex="0">${escapeHTML(base)}</h4>
                          <div class="base-body" id="${baseId}" style="display:none; margin-top:8px; gap:10px"></div>
                        `;
                        grid.appendChild(baseCard);
                        const baseBody = baseCard.querySelector('.base-body');

                        variantKeys.forEach(variant => {
                            const node = variants[variant];
                            const title = (variant==='é»˜è®¤') ? base : `${base} ${variant}`;
                            const hot = node.hot, ice = node.ice, def = node.default;
                            const hotId = hot ? `${cat.key}_${hot.full}__${hot.price}` : '';
                            const iceId = ice ? `${cat.key}_${ice.full}__${ice.price}` : '';
                            const defId = def ? `${cat.key}_${def.full}__${def.price}` : '';
                            if (hot) NAME_TO_CAT.set(hot.full, 'cat_drinks');
                            if (ice) NAME_TO_CAT.set(ice.full, 'cat_drinks');
                            if (def) NAME_TO_CAT.set(def.full, 'cat_drinks');

                            let content = '';
                            if (def) {
                                content += `
                                  <div>
                                    <div style="font-weight:800;opacity:.9">${escapeHTML(title)}</div>
                                    <div class="price">RM ${Number(def.price).toFixed(2)}</div>
                                    <div class="act">
                                      <button class="btn ghost" data-sub="${defId}">${t('minus')}</button>
                                      <div class="qty" data-qty="${defId}">0</div>
                                      <button class="btn" data-add="${defId}">${t('add')}</button>
                                    </div>
                                  </div>
                                `;
                            } else {
                                content += `
                                  <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px">
                                    <div>
                                      <div style="font-weight:800;opacity:.9">${t('hot')}</div>
                                      <div class="price">RM ${hot ? Number(hot.price).toFixed(2) : 'â€”'}</div>
                                      <div class="act">
                                        <button class="btn ghost" ${hot ? `data-sub="${hotId}"` : 'disabled'}>${t('minus')}</button>
                                        <div class="qty" data-qty="${hotId}">0</div>
                                        <button class="btn" ${hot ? `data-add="${hotId}"` : 'disabled'}>${t('add')}</button>
                                      </div>
                                    </div>
                                    <div>
                                      <div style="font-weight:800;opacity:.9">${t('ice')}</div>
                                      <div class="price">RM ${ice ? Number(ice.price).toFixed(2) : 'â€”'}</div>
                                      <div class="act">
                                        <button class="btn ghost" ${ice ? `data-sub="${iceId}"` : 'disabled'}>${t('minus')}</button>
                                        <div class="qty" data-qty="${iceId}">0</div>
                                        <button class="btn" ${ice ? `data-add="${iceId}"` : 'disabled'}>${t('add')}</button>
                                      </div>
                                    </div>
                                  </div>
                                `;
                            }
                            baseBody.insertAdjacentHTML('beforeend', `
                              <div class="card" style="border:1px dashed var(--line); border-radius:12px; padding:10px">
                                <div style="font-weight:800; opacity:.95; margin-bottom:6px">${escapeHTML(title)}</div>
                                ${content}
                              </div>
                            `);
                        });
                    });
                } else {
                    cat.sections.forEach(sec => {
                        sec.items.forEach(it => {
                            NAME_TO_CAT.set(it.name, cat.key);
                            const id = `${cat.key}_${it.name}__${it.price}`;
                            const isJuice = (cat.key === 'cat_juice');
                            grid.insertAdjacentHTML('beforeend', `
                                <div class="item">
                                    <h4>${escapeHTML(it.name)}</h4>
                                    <div class="price">RM ${Number(it.price).toFixed(2)}</div>
                                    ${isJuice ? `<div class="extra"><label><input type="checkbox" data-milk="${id}"> åŠ å¥¶</label></div>` : ''}
                                    <div class="act">
                                        <button class="btn ghost" data-sub='${id}'>${t('minus')}</button>
                                        <div class="qty" data-qty='${id}'>0</div>
                                        <button class="btn" data-add='${id}'>${t('add')}</button>
                                    </div>
                                </div>`);
                        });
                    });
                }

                catsEl.appendChild(wrap);
            });
        }

        renderMenu();

        catsEl.addEventListener('click', e => {
            const h = e.target.closest('[data-toggle]');
            if (h) { const b = h.parentElement.querySelector('.cat-b'); b.classList.toggle('open'); }
        });
        catsEl.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
                const h = e.target.closest('[data-toggle]');
                if (h) {
                    e.preventDefault();
                    const b = h.parentElement.querySelector('.cat-b');
                    b.classList.toggle('open');
                }
            }
        });
        catsEl.addEventListener('click', e => {
            const h = e.target.closest('[data-base-toggle]');
            if (!h) return;
            const id = h.getAttribute('data-base-toggle');
            const body = document.getElementById(id);
            if (!body) return;
            body.style.display = body.style.display === 'none' ? 'block' : 'none';
        });
        catsEl.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
                const h = e.target.closest('[data-base-toggle]');
                if (!h) return;
                e.preventDefault();
                const id = h.getAttribute('data-base-toggle');
                const body = document.getElementById(id);
                if (!body) return;
                body.style.display = body.style.display === 'none' ? 'block' : 'none';
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.cat-b').forEach(b => b.classList.remove('open'));
        });
    </script>
    
    <script>
        /* ===== â‘£ è´­ç‰©è½¦é€»è¾‘ ===== */
        let CART = [];
        function ensureNoteMilk(itemName) {
            const note = document.getElementById('note');
            const tag = `${itemName} åŠ å¥¶`;
            if (!note.value.includes(tag)) {
                note.value = (note.value ? note.value + ' Â· ' : '') + tag;
            }
        }
        function addToCart(name, price, delta = 1, isMilk = false, cat) {
            const p = Number(price);
            if (isNaN(p) || !isFinite(p)) { return; }
            const d = Number(delta);
            if (isNaN(d) || !isFinite(d) || d === 0) { return; }

            const displayName = isMilk ? `${name}ï¼ˆåŠ å¥¶ï¼‰` : name;
            let found = CART.find(x => x.name === displayName && x.price === p);
            
            if (found) {
                found.qty = Math.max(0, found.qty + d);
                if (found.qty <= 0) CART = CART.filter(x => x !== found);
            } else if (d > 0) {
                CART.push({ name: displayName, price: p, qty: 1, cat });
            }
            renderCart();
            syncAllQty();
        }
        function syncAllQty() {
            document.querySelectorAll('.qty[data-qty]').forEach(q => {
                const key = q.getAttribute('data-qty');
                const [cat, name, priceStr] = key.split('__');
                const price = Number(priceStr);
                let totalQty = 0;

                if (cat === 'cat_juice') {
                    // å¯¹äºæœæ±ï¼Œæ±‡æ€»åŸºç¡€ç‰ˆå’ŒåŠ å¥¶ç‰ˆ
                    const baseItemQty = CART.find(it => it.name === name && it.price === price)?.qty || 0;
                    const milkItemQty = CART.find(it => it.name === `${name}ï¼ˆåŠ å¥¶ï¼‰` && it.price === price)?.qty || 0;
                    totalQty = baseItemQty + milkItemQty;
                } else {
                    // å¯¹äºå…¶ä»–é¡¹ç›®ï¼Œç›´æ¥æŸ¥æ‰¾
                    totalQty = CART.find(it => it.name === name && it.price === price)?.qty || 0;
                }
                q.textContent = totalQty;
            });
        }
        catsEl.addEventListener('click', e => {
            const ad = e.target.closest('[data-add]');
            const sb = e.target.closest('[data-sub]');
            
            if (ad) {
                const id = ad.getAttribute('data-add');
                const [cat, name, price] = id.split('__');
                let milk = false;
                if (cat === 'cat_juice') {
                    const chk = document.querySelector(`[data-milk='${id}']`);
                    milk = !!(chk && chk.checked);
                    if (milk) ensureNoteMilk(name);
                }
                addToCart(name, price, 1, milk, cat);
                showToast(`å·²æ·»åŠ  ${name}`);
            }
            if (sb) {
                const id = sb.getAttribute('data-sub');
                const [cat, name, price] = id.split('__');
                let milk = false;
                // [FIXED] æ‰£å‡æ—¶ä¹Ÿæ£€æŸ¥ "åŠ å¥¶" çŠ¶æ€
                if (cat === 'cat_juice') {
                    const chk = document.querySelector(`[data-milk='${id}']`);
                    milk = !!(chk && chk.checked);
                }
                addToCart(name, price, -1, milk, cat);
                showToast(`å·²å‡å°‘ ${name}`);
            }
        }, { capture: true });

        function renderCart() {
            const tb = document.querySelector('#cartTable tbody');
            tb.innerHTML = '';
            let total = 0, items = 0;
            CART.forEach((it) => {
                if (it.qty > 0 && isFinite(it.price) && isFinite(it.qty)) {
                    const itemTotal = it.qty * it.price;
                    total += itemTotal;
                    items += it.qty;
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${escapeHTML(it.name)}</td><td>${it.qty}</td><td>RM ${(itemTotal).toFixed(2)}</td>`;
                    tb.appendChild(tr);
                }
            });
            document.getElementById('total').textContent = 'RM ' + (isFinite(total) ? total.toFixed(2) : '0.00');
        }
    </script>
    
    <script>
        /* ===== â‘¤ è®¢å•æäº¤ä¸åŒæ­¥ ===== */
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        async function submitOrderToSheet() {
            if (!CART.length) {
                showToast('è´­ç‰©è½¦ä¸ºç©º');
                return;
            }

            if (!navigator.onLine) {
                showToast('ç½‘ç»œä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥è¿æ¥');
                return;
            }

            const currentTotal = CART.reduce((sum, it) => sum + (it.qty * it.price || 0), 0);

            const orderData = {
                itemName: CART.map(it => it.name).join(", "),
                quantity: CART.map(it => it.qty).join(", "),
                unitPrice: CART.map(it => it.price).join(", "),
                totalPrice: currentTotal.toFixed(2),
                note: (document.getElementById('note').value || '').trim() || 'æ— å¤‡æ³¨',
                tableNo: document.getElementById('tableNo').value || 'N/A',
                type: document.getElementById('type').value
            };

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbzMXzGN6g9-wpBbGxSo3-iK7faz2UhTrnceVlwX-B6FEWT5URuPlB8OPdRUrXpD2L2wlQ/exec', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(orderData)
                });
                const result = await response.json();
                if (result.success) {
                    showToast('è®¢å•å·²åŒæ­¥åˆ°è¡¨æ ¼');
                    if ('vibrate' in navigator) navigator.vibrate([200, 100, 200]);
                    
                    pushOrderToHistory({
                        ts: Date.now(),
                        total: Number(orderData.totalPrice),
                        items: CART.map(it => ({ name: it.name, price: it.price, qty: it.qty, cat: it.cat }))
                    });
                    bumpKPI(currentTotal, CART.reduce((s, it) => s + it.qty, 0));
                    
                    CART = [];
                    renderCart();
                    syncAllQty();
                } else {
                    throw new Error(result.message || 'åŒæ­¥å¤±è´¥');
                }
            } catch (error) {
                showToast('åŒæ­¥å‡ºé”™: ' + error.message);
                console.error('Error during submission:', error);
            }
        }
        document.getElementById('checkoutBtn').addEventListener('click', submitOrderToSheet);
    </script>
    
    <script>
        /* ===== â‘¥ å¯¼å‡ºä¸æ‰“å° ===== */
        function exportCSV() {
            const rows = [["Item", "Qty", "Unit Price", "Amount"]];
            let total = 0;
            CART.forEach(it => { const amt = it.qty * it.price; total += amt; rows.push([it.name, it.qty, it.price, amt]); });
            rows.push(["Total", "", "", total.toFixed(2)]);
            const csv = '\uFEFF' + rows.map(r => r.map(v => `"${String(v).replace(/"/g, '""')}"`).join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'order.csv';
            a.click();
        }

        function printTicket() {
            const tShop = document.getElementById('t_shop');
            const tInfo = document.getElementById('t_info');
            const tItems = document.getElementById('t_items');
            const tTotal = document.getElementById('t_total');
            const table = (document.getElementById('tableNo').value || '').trim();
            const type = document.getElementById('type').value;
            const note = (document.getElementById('note').value || '').trim();
            const sum = CART.reduce((s, it) => s + it.qty * it.price, 0);
            document.getElementById('t_title').textContent = 'é¾å…´è®°á°äº‘åé¢ Â· å°ç¥¨';
            const logo = '';
            tShop.innerHTML = `${logo}<b>é¾è¿è½©á°ç¾é£Ÿä¸­å¿ƒ</b>`;
            tInfo.textContent = `æ¡Œå·: ${table || '-'} Â· ${type === 'dinein' ? 'å ‚é£Ÿ' : 'æ‰“åŒ…'}${note ? ` Â· å¤‡æ³¨: ${note}` : ''}`;
            tItems.innerHTML = CART.map(it => `${escapeHTML(it.name)} Ã—${it.qty} â€” RM ${(it.qty * it.price).toFixed(2)}`).join('<br>');
            tTotal.textContent = 'åˆè®¡: RM ' + sum.toFixed(2);
            window.print();
        }

        /* ===== â‘¦ KPI ç»Ÿè®¡ ===== */
        const KEY_ORDERS = 'LYX_ACCUM_ORDERS_SIMPLE';
        const KEY_AMOUNT = 'LYX_ACCUM_AMOUNT_SIMPLE';
        const KEY_ITEMS = 'LYX_ACCUM_ITEMS_SIMPLE';
        
        function bumpKPI(sum, itemsCount) {
            const orders = Number(localStorage.getItem(KEY_ORDERS) || 0) + 1;
            const amount = Number(localStorage.getItem(KEY_AMOUNT) || 0) + Number(sum || 0);
            const items = Number(localStorage.getItem(KEY_ITEMS) || 0) + itemsCount;
            localStorage.setItem(KEY_ORDERS, String(orders));
            localStorage.setItem(KEY_AMOUNT, String(amount));
            localStorage.setItem(KEY_ITEMS, String(items));
            updateKpiDisplay();
        }
        function updateKpiDisplay() {
            const orders = Number(localStorage.getItem(KEY_ORDERS) || 0);
            const amount = Number(localStorage.getItem(KEY_AMOUNT) || 0);
            const items = Number(localStorage.getItem(KEY_ITEMS) || 0);
            document.getElementById('k_orders').textContent = orders;
            document.getElementById('k_amount').textContent = 'RM ' + amount.toFixed(2);
            document.getElementById('k_items').textContent = items;
        }

        /* ===== â‘§ å†å²è®¢å• & æ—¥æœŸç»Ÿè®¡ ===== */
        const KEY_ORDERS_JSON = 'LYX_ORDERS_V1';
        function loadOrders() { try { return JSON.parse(localStorage.getItem(KEY_ORDERS_JSON) || '[]'); } catch { return []; } }
        function saveOrders(list) { localStorage.setItem(KEY_ORDERS_JSON, JSON.stringify(list)); }
        function pushOrderToHistory(payload) {
            if (!payload.ts || !payload.items || !Array.isArray(payload.items)) return;
            const list = loadOrders();
            list.push(payload);
            if (list.length > 1000) list.shift();
            saveOrders(list);
        }

        function calcStatsByDate(yyyy_mm_dd) {
            const list = loadOrders();
            if (!yyyy_mm_dd) return { orders: 0, amount: 0, cat: {} };
            const [Y, M, D] = yyyy_mm_dd.split('-').map(Number);
            const start = new Date(Y, M - 1, D, 0, 0, 0, 0).getTime();
            const end = new Date(Y, M - 1, D, 23, 59, 59, 999).getTime();
            const dayOrders = list.filter(o => o.ts >= start && o.ts <= end);
            let sum = 0;
            const catMap = new Map();
            dayOrders.forEach(o => {
                sum += o.total;
                o.items.forEach(it => {
                    const catKey = it.cat || 'unknown';
                    const m = catMap.get(catKey) || { amount: 0, items: 0 };
                    m.amount += it.price * it.qty;
                    m.items += it.qty;
                    catMap.set(catKey, m);
                });
            });
            const cat = [...catMap.entries()]
                .sort((a, b) => b[1].amount - a[1].amount)
                .reduce((obj, [k, v]) => { obj[k] = v; return obj; }, {});
            return { orders: dayOrders.length, amount: sum, cat };
        }
    </script>
    
    <script>
        /* ===== â‘¨ åˆå§‹åŒ–ä¸äº‹ä»¶ç»‘å®š ===== */
        document.addEventListener('DOMContentLoaded', () => {
            applyI18N();
            updateKpiDisplay();

            // è¯­è¨€åˆ‡æ¢
            document.querySelectorAll('.langs button').forEach(b => b.addEventListener('click', () => {
                document.querySelector('.langs button.active').classList.remove('active');
                b.classList.add('active');
                LANG = b.getAttribute('data-lang');
                applyI18N();
                renderMenu();
            }));

            // å¿«æ·æ¡Œå·
            document.querySelectorAll('.table-chip').forEach(t => t.addEventListener('click', () => {
                document.getElementById('tableNo').value = t.getAttribute('data-table');
                document.querySelectorAll('.table-chip').forEach(x => x.classList.remove('active'));
                t.classList.add('active');
            }));

            // [ADDED] ç»Ÿè®¡é¢æ¿åŠŸèƒ½
            const statsBtn = document.getElementById('statsBtn');
            const statsPanel = document.getElementById('statsPanel');
            const calcBtn = document.getElementById('calcBtn');
            const resetKPIBtn = document.getElementById('resetKPI');
            const statDateInput = document.getElementById('statDate');
            const statResultDiv = document.getElementById('statResult');
            
            // é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
            statDateInput.valueAsDate = new Date();

            statsBtn.addEventListener('click', () => {
                statsPanel.style.display = statsPanel.style.display === 'none' ? 'block' : 'none';
            });

            calcBtn.addEventListener('click', () => {
                const date = statDateInput.value;
                if (!date) {
                    showToast('è¯·å…ˆé€‰æ‹©æ—¥æœŸ');
                    return;
                }
                const stats = calcStatsByDate(date);
                
                // 1. æ˜¾ç¤ºç»“æœåˆ°ç•Œé¢
                let resultText = `===== ${date} ç»Ÿè®¡ =====\n`;
                resultText += `æ€»é‡‘é¢: RM ${stats.amount.toFixed(2)}\n`;
                resultText += `æ€»è®¢å•: ${stats.orders}\n\n`;
                resultText += `----- åˆ†ç±»è¯¦æƒ… -----\n`;
                
                let waMsg = `*é¾å…´è®° ${date} è´¦ç›®*\n\n`;
                waMsg += `*æ€»é”€å”®é¢: RM ${stats.amount.toFixed(2)}*\n`;
                waMsg += `*æ€»è®¢å•æ•°: ${stats.orders}*\n\n`;
                waMsg += `*--- å„ç±»ç›®è¯¦æƒ… ---*\n`;

                for (const catKey in stats.cat) {
                    const catData = stats.cat[catKey];
                    const catName = t(catKey) || catKey;
                    const line = `${catName}: RM ${catData.amount.toFixed(2)} (${catData.items} ä»¶)\n`;
                    resultText += line;
                    waMsg += `*${catName}*: RM ${catData.amount.toFixed(2)} (${catData.items} ä»¶)\n`;
                }
                statResultDiv.textContent = resultText;
                
                // 2. å‘é€åˆ° WhatsApp
                const encodedMsg = encodeURIComponent(waMsg);
                window.open(`https://wa.me/?text=${encodedMsg}`);
            });

            resetKPIBtn.addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦é‡ç½®é¦–é¡µæ˜¾ç¤ºçš„ä»Šæ—¥ç´¯è®¡æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯é€†ï¼')) {
                    localStorage.removeItem(KEY_ORDERS);
                    localStorage.removeItem(KEY_AMOUNT);
                    localStorage.removeItem(KEY_ITEMS);
                    updateKpiDisplay();
                    showToast('ä»Šæ—¥ç´¯è®¡ç»Ÿè®¡å·²é‡ç½®');
                }
            });
        });
    </script>
</body>
</html>
