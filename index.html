<script>
/* ========== I18N：语言 ========== */
let LANG = 'zh';
const I18N = {
  ui: {
    zh: {
      title_main: "龍運轩ᝰ美食中心", title_sub: "LYX Food Center",
      order: "点餐 / Order", cart: "订单 / Cart",
      table: "桌号", takeaway: "外带", dinein: "堂食",
      add: "加入",
      cat_wonton: "龍兴记ᝰ云吞面", cat_wonton_tip: "点击展开/收起",
      cat_drinks: "饮料", cat_drinks_tip: "全部饮料冰+RM0.20（罐装水除外；我们已把热/冰分开定价）",
      cat_auntie: "婶婶档", cat_auntie_tip: "点击展开/收起",
      cat_gx: "广西卷筒粉", cat_gx_tip: "点击展开/收起",
      note_label: "备注", note_ph: "例如：少甜 / 少冰 / 加辣",
      print: "打印小票",
      done: "完成并统计（群聊）",
      k_orders: "订单笔数", k_items: "售出件数", k_sales: "销售金额",
      tool_today: "查看明细", tool_cat: "分类统计", tool_csv: "导出今日 CSV", tool_del: "删单（需密码）",
      sum_total: "合计 Total",
      alert_pick: "请先选择项目", alert_empty: "没有项目",
      today_none: "（今天暂无）",
      cat_report_title: "分类统计（累计到今天）",
      cat_name_w: "云吞面", cat_name_d: "饮料", cat_name_a: "婶婶档", cat_name_gx: "广西卷筒粉",
      time: "时间", type: "类型",
      csv_time: "时间", csv_table: "桌号", csv_type: "类型",
      csv_items: "项目", csv_total: "合计", csv_note: "备注"
    },
    en: {
      title_main: "LYX Food Center (龍運轩ᝰ)", title_sub: "LYX Food Center",
      order: "Order", cart: "Cart",
      table: "Table", takeaway: "Takeaway", dinein: "Dine-in",
      add: "Add",
      cat_wonton: "Long Hing Kee · Wonton Noodles", cat_wonton_tip: "Tap to expand/collapse",
      cat_drinks: "Drinks", cat_drinks_tip: "Iced + RM0.20 (except canned water; hot/iced priced separately)",
      cat_auntie: "Auntie's Stall", cat_auntie_tip: "Tap to expand/collapse",
      cat_gx: "Guangxi Rice Rolls", cat_gx_tip: "Tap to expand/collapse",
      note_label: "Note", note_ph: "e.g. less sweet / less ice / extra spicy",
      print: "Print Receipt",
      done: "Finish & Send (Group)",
      k_orders: "Orders", k_items: "Items", k_sales: "Sales",
      tool_today: "View Today", tool_cat: "By Category", tool_csv: "Export Today CSV", tool_del: "Delete (password)",
      sum_total: "Total",
      alert_pick: "Please add items first", alert_empty: "No items",
      today_none: "(No orders today)",
      cat_report_title: "Category Summary (today)",
      cat_name_w: "Wonton Noodles", cat_name_d: "Drinks", cat_name_a: "Auntie's Stall", cat_name_gx: "Guangxi Rolls",
      time: "Time", type: "Type",
      csv_time: "Time", csv_table: "Table", csv_type: "Type",
      csv_items: "Items", csv_total: "Total", csv_note: "Note"
    },
    vi: {
      title_main: "Trung tâm Ẩm thực LYX (龍運轩ᝰ)", title_sub: "LYX Food Center",
      order: "Gọi món", cart: "Giỏ hàng",
      table: "Bàn", takeaway: "Mang đi", dinein: "Dùng tại chỗ",
      add: "Thêm",
      cat_wonton: "Mì hoành thánh Long Hing Kee", cat_wonton_tip: "Nhấn để mở/đóng",
      cat_drinks: "Đồ uống", cat_drinks_tip: "Đá + RM0.20 (trừ nước lon; giá nóng/lạnh tách riêng)",
      cat_auntie: "Quầy của Cô", cat_auntie_tip: "Nhấn để mở/đóng",
      cat_gx: "Bánh cuốn Quảng Tây", cat_gx_tip: "Nhấn để mở/đóng",
      note_label: "Ghi chú", note_ph: "vd: ít ngọt / ít đá / thêm cay",
      print: "In hóa đơn",
      done: "Hoàn tất & gửi (nhóm)",
      k_orders: "Đơn", k_items: "Món", k_sales: "Doanh thu",
      tool_today: "Xem hôm nay", tool_cat: "Theo danh mục", tool_csv: "Xuất CSV hôm nay", tool_del: "Xóa (mật khẩu)",
      sum_total: "Tổng",
      alert_pick: "Hãy chọn món trước", alert_empty: "Chưa có món",
      today_none: "(Chưa có đơn hôm nay)",
      cat_report_title: "Tổng hợp theo danh mục (hôm nay)",
      cat_name_w: "Mì hoành thánh", cat_name_d: "Đồ uống", cat_name_a: "Quầy của Cô", cat_name_gx: "Bánh cuốn Quảng Tây",
      time: "Thời gian", type: "Loại",
      csv_time: "Thời gian", csv_table: "Bàn", csv_type: "Loại",
      csv_items: "Món", csv_total: "Tổng", csv_note: "Ghi chú"
    }
  },
  items: {
    w_small:{en:"Wonton Noodles (S)",vi:"Mì hoành thánh (Nhỏ)"},
    w_mid:{en:"Wonton Noodles (M)",vi:"Mì hoành thánh (Vừa)"},
    w_big:{en:"Wonton Noodles (L)",vi:"Mì hoành thánh (Lớn)"},
    w_wantan_dry:{en:"Wontons (Dry, per portion)",vi:"Hoành thánh khô (1 phần)"},
    w_wantan_soup:{en:"Wontons (Soup, per portion)",vi:"Hoành thánh nước (1 phần)"},
    w_add3:{en:"Add-on: 3 Wontons",vi:"Thêm: 3 hoành thánh"},
    d_coffee_hot:{en:"Coffee (Hot)",vi:"Cà phê (Nóng)"}, d_coffee_ice:{en:"Coffee (Iced)",vi:"Cà phê (Đá)"},
    d_coffeeC_hot:{en:"Coffee C (Hot)",vi:"Cà phê C (Nóng)"}, d_coffeeC_ice:{en:"Coffee C (Iced)",vi:"Cà phê C (Đá)"},
    d_coffeeO_hot:{en:"Coffee O (Hot)",vi:"Cà phê O (Nóng)"}, d_coffeeO_ice:{en:"Coffee O (Iced)",vi:"Cà phê O (Đá)"},
    d_milktea_hot:{en:"Milk Tea (Hot)",vi:"Trà sữa (Nóng)"}, d_milktea_ice:{en:"Milk Tea (Iced)",vi:"Trà sữa (Đá)"},
    d_milkteaC_hot:{en:"Milk Tea C (Hot)",vi:"Trà sữa C (Nóng)"}, d_milkteaC_ice:{en:"Milk Tea C (Iced)",vi:"Trà sữa C (Đá)"},
    d_milkteaSC_hot:{en:"Salty Milk Tea C (Hot)",vi:"Trà sữa mặn C (Nóng)"}, d_milkteaSC_ice:{en:"Salty Milk Tea C (Iced)",vi:"Trà sữa mặn C (Đá)"},
    d_milo_hot:{en:"Milo (Hot)",vi:"Milo (Nóng)"}, d_milo_ice:{en:"Milo (Iced)",vi:"Milo (Đá)"},
    d_miloC_hot:{en:"Milo C (Hot)",vi:"Milo C (Nóng)"}, d_miloC_ice:{en:"Milo C (Iced)",vi:"Milo C (Đá)"},
    d_miloO_hot:{en:"Milo O (Hot)",vi:"Milo O (Nóng)"}, d_miloO_ice:{en:"Milo O (Iced)",vi:"Milo O (Đá)"},
    d_canned:{en:"Canned Water",vi:"Nước lon"},
    a_bitter_rice_noodle:{en:"Bitter Gourd Bee Hoon",vi:"Bún khổ qua"},
    a_nasi_ayam:{en:"Nasi Lemak (Chicken)",vi:"Nasi Lemak (gà)"}, a_nasi_egg:{en:"Nasi Lemak (Egg only)",vi:"Nasi Lemak (trứng)"},
    a_pan_mee:{en:"Pan Mee",vi:"Mì Pan Mee"}, a_braised_rice:{en:"Braised Rice",vi:"Cơm kho"},
    a_congee_pork:{en:"Fish Congee (Pork)",vi:"Cháo cá (heo)"}, a_congee_chicken:{en:"Fish Congee (Chicken)",vi:"Cháo cá (gà)"},
    a_mianxian:{en:"Mee Sua",vi:"Mì sợi Mee Sua"}, a_lu_rou_fan:{en:"Lu Rou Fan",vi:"Cơm thịt kho"}, a_kuey_teow_soup:{en:"Kuey Teow Soup",vi:"Hủ tiếu nước"},
    a_add_century_egg:{en:"Add-on: Century Egg",vi:"Thêm: trứng bách thảo"}, a_add_pickled_cucumber:{en:"Pickled Cucumber",vi:"Dưa leo chua"},
    a_add_pickled_okra:{en:"Pickled Okra",vi:"Đậu bắp chua"}, a_add_pickled_bitter:{en:"Pickled Bitter Gourd",vi:"Khổ qua chua"},
    a_add_pickled_tofu:{en:"Pickled Tofu",vi:"Đậu phụ chua"}, a_add_wing:{en:"Fried Chicken Wing",vi:"Cánh gà chiên"}, a_add_fried_egg:{en:"Fried Egg",vi:"Trứng ốp la"},
    gx_su:{en:"Plain Rice Roll (kosong)",vi:"Bánh cuốn trơn"}, gx_veg:{en:"Veg Rice Roll",vi:"Bánh cuốn rau"},
    gx_meatveg:{en:"Meat + Veg Rice Roll",vi:"Bánh cuốn thịt + rau"}, gx_meat:{en:"Meat Rice Roll",vi:"Bánh cuốn thịt"},
    gx_full:{en:"Combo Rice Roll",vi:"Bánh cuốn thập cẩm"}, gx_spring:{en:"Spring Roll",vi:"Chả giò"}, gx_taro:{en:"Taro Cake",vi:"Bánh khoai môn"}
  }
};
function t(k){ return I18N.ui[LANG][k]; }
function tItemName(id, fallback){ return I18N.items[id]?.[LANG] || fallback; }

/* ========= 菜单数据 ========= */
const WONTON=[{id:"w_small",name:"云吞面（小）",price:6.50},{id:"w_mid",name:"云吞面（中）",price:7.50},
{id:"w_big",name:"云吞面（大）",price:8.50},{id:"w_wantan_dry",name:"云吞 干捞（一份）",price:5.00},
{id:"w_wantan_soup",name:"云吞 汤（一份）",price:5.00},{id:"w_add3",name:"加料：云吞 ×3",price:1.00}];
const DRINKS=[{id:"d_coffee_hot",name:"咖啡（热）",price:2.30},{id:"d_coffee_ice",name:"咖啡（冰）",price:2.50},
{id:"d_coffeeC_hot",name:"咖啡C（热）",price:2.50},{id:"d_coffeeC_ice",name:"咖啡C（冰）",price:2.70},
{id:"d_coffeeO_hot",name:"咖啡O（热）",price:2.00},{id:"d_coffeeO_ice",name:"咖啡O（冰）",price:2.20},
{id:"d_milktea_hot",name:"奶茶（热）",price:2.30},{id:"d_milktea_ice",name:"奶茶（冰）",price:2.50},
{id:"d_milkteaC_hot",name:"奶茶C（热）",price:2.50},{id:"d_milkteaC_ice",name:"奶茶C（冰）",price:2.70},
{id:"d_milkteaSC_hot",name:"奶茶咸C（热）",price:2.50},{id:"d_milkteaSC_ice",name:"奶茶咸C（冰）",price:2.70},
{id:"d_milo_hot",name:"Milo（热）",price:2.60},{id:"d_milo_ice",name:"Milo（冰）",price:2.80},
{id:"d_miloC_hot",name:"Milo C（热）",price:2.80},{id:"d_miloC_ice",name:"Milo C（冰）",price:3.00},
{id:"d_miloO_hot",name:"Milo O（热）",price:2.60},{id:"d_miloO_ice",name:"Milo O（冰）",price:2.80},
{id:"d_canned",name:"罐装水",price:3.00}];
const AUNTIE=[{id:"a_bitter_rice_noodle",name:"苦瓜米粉",price:6.00},{id:"a_nasi_ayam",name:"Nasi Lemak（有鸡肉）",price:6.00},
{id:"a_nasi_egg",name:"Nasi Lemak（只有鸡蛋）",price:3.00},{id:"a_pan_mee",name:"面粉糕",price:6.00},
{id:"a_braised_rice",name:"红烧饭",price:6.00},{id:"a_congee_pork",name:"鱼粥（猪肉）",price:6.00},
{id:"a_congee_chicken",name:"鱼粥（鸡肉）",price:6.00},{id:"a_mianxian",name:"面线",price:6.00},
{id:"a_lu_rou_fan",name:"卤肉饭",price:6.00},{id:"a_kuey_teow_soup",name:"果条汤",price:6.00},
{id:"a_add_century_egg",name:"加皮蛋",price:1.00},{id:"a_add_pickled_cucumber",name:"酸笋瓜",price:1.50},
{id:"a_add_pickled_okra",name:"酸羊角豆",price:1.50},{id:"a_add_pickled_bitter",name:"酸苦瓜",price:1.50},
{id:"a_add_pickled_tofu",name:"酸豆腐",price:1.50},{id:"a_add_wing",name:"炸鸡翅膀",price:3.00},
{id:"a_add_fried_egg",name:"煎鸡蛋",price:1.00}];
const GUANGXI=[{id:"gx_su",name:"素粉(kosong)",price:1.00},{id:"gx_veg",name:"蔬菜卷筒粉",price:2.00},
{id:"gx_meatveg",name:"菜加肉卷筒粉",price:3.00},{id:"gx_meat",name:"肉卷筒粉",price:3.00},
{id:"gx_full",name:"全家福卷筒粉",price:4.00},{id:"gx_spring",name:"春卷",price:1.00},{id:"gx_taro",name:"芋头米糕",price:1.00}];
const ALL=[...WONTON,...DRINKS,...AUNTIE,...GUANGXI];

/* ========== 渲染 ========== */
const cart={};
function itemCard(it){const displayName=tItemName(it.id,it.name);return`
<div class="item"><div class="left"><div class="title">${displayName}</div><div class="sub">RM ${it.price.toFixed(2)}</div></div>
<div><button class="btn small" onclick="dec('${it.id}')">-</button><div id="qty-${it.id}" class="qty">${cart[it.id]||0}</div>
<button class="btn small" onclick="inc('${it.id}')">+</button><div style="height:6px"></div>
<button class="btn add" onclick="inc('${it.id}')">${t('add')}</button></div></div>`;}
function renderCategory(elId,list){document.getElementById(elId).innerHTML=list.map(itemCard).join("");}
function renderAll(){
  document.querySelector('header h1 span:nth-child(1)').textContent=t('title_main');
  document.querySelector('header h1 small').textContent=t('title_sub');
  const panelHeads=document.querySelectorAll('.panel h3');panelHeads[0].childNodes[0].nodeValue=t('order');panelHeads[1].childNodes[
