<!DOCTYPE html>
<html lang="zh" translate="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>龍運轩ᝰ美食中心 · LYX Food Center</title>
<meta name="color-scheme" content="light">
<style>
:root{--bg:#f7f8fb;--card:#fff;--ink:#0f172a;--mut:#6b7280;--line:#e5e7eb;--brand:#0ea5e9;--ok:#059669;--accent:#f59e0b;--shadow:0 8px 24px rgba(2,8,23,.06)}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.wrap{max-width:1200px;margin:20px auto;padding:0 12px 24px}
header{position:sticky;top:0;z-index:9;background:linear-gradient(180deg,#0ea5e9,#0284c7);color:#fff;padding:14px 16px}
h1{margin:0;font-size:20px;letter-spacing:.5px;display:flex;gap:10px;align-items:baseline}
h1 small{opacity:.9}
.lang{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.lang button{padding:6px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.45);background:rgba(255,255,255,.12);color:#fff;cursor:pointer;font-weight:700}
.lang button.active{background:#fff;color:#0b3a55}
.grid{display:grid;grid-template-columns:2fr 1fr;gap:16px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
.panel{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow)}
.panel h3{margin:0;padding:14px 16px;border-bottom:1px solid var(--line);font-size:16px}
.section{padding:12px 12px 18px}
.controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:0 6px 10px}
.label{font-weight:700}
.input{padding:10px;border:1px solid var(--line);border-radius:12px;min-width:140px}
.switch{display:flex;gap:8px;align-items:center;border:1px solid var(--line);border-radius:12px;padding:8px 10px;background:#fff}
details{border:1px solid var(--line);border-radius:14px;margin:10px 0;background:#fff}
summary{list-style:none;cursor:pointer;padding:12px 14px;border-radius:14px;display:flex;justify-content:space-between;align-items:center;font-weight:900;background:#fff7ed;border-left:4px solid var(--accent)}
summary::marker,summary::-webkit-details-marker{display:none}
.cat-sub{color:#a16207;font-weight:600;font-size:12px}
.cards{padding:10px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (max-width:720px){.cards{grid-template-columns:1fr}}
.item{border:1px solid var(--line);border-radius:14px;padding:12px;background:#fff;display:flex;gap:12px;align-items:center}
.item .left{flex:1}
.title{font-weight:900}
.sub{color:var(--mut);font-size:12px;line-height:1.25}
.qty{min-width:56px;text-align:center;font-weight:900}
.btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer;font-weight:700}
.btn.small{padding:10px 14px;font-size:18px;border-width:2px}
.btn.add{background:var(--brand);border-color:var(--brand);color:#fff}
.sticky{position:sticky;top:86px}
.sumrow{display:flex;gap:10px;margin-top:10px}
.sumrow .btn.print{flex:1;background:#1d4ed8;border-color:#1d4ed8;color:#fff}
.sumrow .btn.done{flex:3;background:var(--ok);border-color:var(--ok);color:#fff}
.note{width:100%;min-height:68px;border:1px solid var(--line);border-radius:12px;padding:10px;margin-top:10px}
.sum{border-top:1px dashed var(--line);padding-top:10px;margin-top:10px}
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
.kpi{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff;text-align:center}
.kpi b{display:block;font-size:18px}
.tools{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.hidden{display:none}
</style>
</head>
<body>
<header>
  <h1><span id="title-main">龍運轩ᝰ美食中心</span> <small id="title-sub">LYX Food Center</small></h1>
  <div class="lang">
    <button id="btn-zh" class="active">中文</button>
    <button id="btn-en">English</button>
    <button id="btn-vi">Tiếng Việt</button>
  </div>
</header>

<div class="wrap grid">
  <!-- 左：菜单 -->
  <section class="panel">
    <h3 id="panel-order">点餐 / Order</h3>
    <div class="section">
      <div class="controls">
        <label class="label" id="label-table">桌号</label>
        <input id="tableNo" class="input" placeholder="A1">
        <label class="switch">
          <input type="checkbox" id="takeaway">
          <span id="takeaway-label">外带</span>
        </label>
      </div>

      <details>
        <summary><span id="sum-wonton">龍兴记ᝰ云吞面</span><span class="cat-sub" id="tip-wonton">点击展开/收起</span></summary>
        <div class="cards" id="cat-wonton"></div>
      </details>

      <details>
        <summary><span id="sum-drinks">饮料</span><span class="cat-sub" id="tip-drinks">全部饮料冰+RM0.20（罐装水除外；我们已把热/冰分开定价）</span></summary>
        <div class="cards" id="cat-drinks"></div>
      </details>

      <details>
        <summary><span id="sum-auntie">婶婶档</span><span class="cat-sub" id="tip-auntie">点击展开/收起</span></summary>
        <div class="cards" id="cat-auntie"></div>
      </details>

      <details>
        <summary><span id="sum-gx">广西卷筒粉</span><span class="cat-sub" id="tip-gx">点击展开/收起</span></summary>
        <div class="cards" id="cat-guangxi"></div>
      </details>
    </div>
  </section>

  <!-- 右：订单 -->
  <aside class="panel sticky">
    <h3 id="panel-cart">订单 / Cart</h3>
    <div id="cart" class="section"></div>
    <div class="section">
      <label class="label" id="note-label">备注</label>
      <textarea id="note" class="note" placeholder="例如：少甜 / 少冰 / 加辣"></textarea>

      <div class="sumrow">
        <button class="btn print" id="btn-print">打印小票</button>
        <button class="btn done" id="btn-done">完成并统计（群聊）</button>
      </div>

      <div class="kpis">
        <div class="kpi"><span id="kpi-orders-title">订单笔数</span><b id="kpi-orders">0</b></div>
        <div class="kpi"><span id="kpi-items-title">售出件数</span><b id="kpi-items">0</b></div>
        <div class="kpi"><span id="kpi-sales-title">销售金额</span><b id="kpi-sales">RM 0.00</b></div>
      </div>

      <div class="tools">
        <button class="btn" id="btn-view">查看明细</button>
        <button class="btn" id="btn-cat">分类统计</button>
        <button class="btn" id="btn-csv">导出今日 CSV</button>
        <button class="btn" id="btn-del">删单（需密码）</button>
      </div>
    </div>
  </aside>
</div>

<!-- 打印区 -->
<div id="print-area" class="hidden"></div>

<script>
/* —— 报错可视化，避免白屏 —— */
window.onerror = function(msg, src, line, col) {
  alert("脚本错误：\\n" + msg + "\\n@" + (src||'inline') + ":" + line + ":" + col);
};

/* ========== I18N（精简版） ========== */
let LANG = 'zh';
const I18N = {
  ui: {
    zh:{title_main:"龍運轩ᝰ美食中心",title_sub:"LYX Food Center",order:"点餐 / Order",cart:"订单 / Cart",
      table:"桌号",takeaway:"外带",dinein:"堂食",add:"加入",
      cat_wonton:"龍兴记ᝰ云吞面",cat_wonton_tip:"点击展开/收起",
      cat_drinks:"饮料",cat_drinks_tip:"全部饮料冰+RM0.20（罐装水除外；我们已把热/冰分开定价）",
      cat_auntie:"婶婶档",cat_auntie_tip:"点击展开/收起",
      cat_gx:"广西卷筒粉",cat_gx_tip:"点击展开/收起",
      note_label:"备注",note_ph:"例如：少甜 / 少冰 / 加辣",
      print:"打印小票",done:"完成并统计（群聊）",
      k_orders:"订单笔数",k_items:"售出件数",k_sales:"销售金额",
      tool_today:"查看明细",tool_cat:"分类统计",tool_csv:"导出今日 CSV",tool_del:"删单（需密码）",
      sum_total:"合计 Total",alert_pick:"请先选择项目",alert_empty:"没有项目",
      today_none:"（今天暂无）",cat_report_title:"分类统计（累计到今天）",
      time:"时间",type:"类型"},
    en:{title_main:"LYX Food Center (龍運轩ᝰ)",title_sub:"LYX Food Center",
      order:"Order",cart:"Cart",table:"Table",takeaway:"Takeaway",dinein:"Dine-in",add:"Add",
      cat_wonton:"Wonton Noodles",cat_wonton_tip:"Tap to expand/collapse",
      cat_drinks:"Drinks",cat_drinks_tip:"Iced + RM0.20 (except canned water; hot/iced priced separately)",
      cat_auntie:"Auntie's Stall",cat_auntie_tip:"Tap to expand/collapse",
      cat_gx:"Guangxi Rolls",cat_gx_tip:"Tap to expand/collapse",
      note_label:"Note",note_ph:"e.g. less sweet / less ice / extra spicy",
      print:"Print Receipt",done:"Finish & Send (Group)",
      k_orders:"Orders",k_items:"Items",k_sales:"Sales",
      tool_today:"View Today",tool_cat:"By Category",tool_csv:"Export Today CSV",tool_del:"Delete (password)",
      sum_total:"Total",alert_pick:"Please add items first",alert_empty:"No items",
      today_none:"(No orders today)",cat_report_title:"Category Summary (today)",
      time:"Time",type:"Type"},
    vi:{title_main:"Trung tâm Ẩm thực LYX (龍運轩ᝰ)",title_sub:"LYX Food Center",
      order:"Gọi món",cart:"Giỏ hàng",table:"Bàn",takeaway:"Mang đi",dinein:"Dùng tại chỗ",add:"Thêm",
      cat_wonton:"Mì hoành thánh",cat_wonton_tip:"Nhấn để mở/đóng",
      cat_drinks:"Đồ uống",cat_drinks_tip:"Đá + RM0.20 (trừ nước lon; giá nóng/lạnh tách riêng)",
      cat_auntie:"Quầy của Cô",cat_auntie_tip:"Nhấn để mở/đóng",
      cat_gx:"Bánh cuốn Quảng Tây",cat_gx_tip:"Nhấn để mở/đóng",
      note_label:"Ghi chú",note_ph:"vd: ít ngọt / ít đá / thêm cay",
      print:"In hóa đơn",done:"Hoàn tất & gửi (nhóm)",
      k_orders:"Đơn",k_items:"Món",k_sales:"Doanh thu",
      tool_today:"Xem hôm nay",tool_cat:"Theo danh mục",tool_csv:"Xuất CSV hôm nay",tool_del:"Xóa (mật khẩu)",
      sum_total:"Tổng",alert_pick:"Hãy chọn món trước",alert_empty:"Chưa có món",
      today_none:"(Chưa có đơn hôm nay)",cat_report_title:"Tổng hợp theo danh mục (hôm nay)",
      time:"Thời gian",type:"Loại"}
  }
};
function t(k){return I18N.ui[LANG][k];}

/* ========== 菜单数据（示例/可运行） ========== */
const WONTON=[{id:"w_small",name:"云吞面（小）",price:6.50},{id:"w_mid",name:"云吞面（中）",price:7.50},{id:"w_big",name:"云吞面（大）",price:8.50}];
const DRINKS=[{id:"d_coffee_hot",name:"咖啡（热）",price:2.30},{id:"d_coffee_ice",name:"咖啡（冰）",price:2.50},{id:"d_canned",name:"罐装水",price:3.00}];
const AUNTIE=[{id:"a_pan_mee",name:"面粉糕",price:6.00},{id:"a_lu_rou_fan",name:"卤肉饭",price:6.00}];
const GUANGXI=[{id:"gx_su",name:"素粉(kosong)",price:1.00},{id:"gx_full",name:"全家福卷筒粉",price:4.00}];
const ALL=[...WONTON,...DRINKS,...AUNTIE,...GUANGXI];

/* ========== 渲染 & 购物车 ========== */
const cart={};
function itemCard(it){
  return `<div class="item">
    <div class="left"><div class="title">${it.name}</div><div class="sub">RM ${it.price.toFixed(2)}</div></div>
    <div>
      <button class="btn small" onclick="dec('${it.id}')">-</button>
      <div id="qty-${it.id}" class="qty">${cart[it.id]||0}</div>
      <button class="btn small" onclick="inc('${it.id}')">+</button>
      <div style="height:6px"></div>
      <button class="btn add" onclick="inc('${it.id}')">加入</button>
    </div>
  </div>`;
}
function renderCategory(el,list){const c=document.getElementById(el); if(!c){alert("缺少容器："+el);return;} c.innerHTML=list.map(itemCard).join("");}
function priceOf(id){const it=ALL.find(x=>x.id===id);return it?it.price:0;}
function nameOf(id){const it=ALL.find(x=>x.id===id);return it?it.name:id;}
function inc(id){cart[id]=(cart[id]||0)+1;syncQty(id);renderCart();}
function dec(id){if(!cart[id])return;cart[id]--; if(cart[id]<=0) delete cart[id];syncQty(id);renderCart();}
function syncQty(id){const el=document.getElementById("qty-"+id); if(el) el.textContent=cart[id]||0;}
function renderCart(){
  const el=document.getElementById("cart"); let subtotal=0, html="";
  Object.keys(cart).forEach(id=>{const q=cart[id]; const line=priceOf(id)*q; subtotal+=line; html+=`<div>${nameOf(id)} × ${q} = RM ${line.toFixed(2)}</div>`;});
  el.innerHTML = html + `<div class="sum"><b>${t('sum_total')}:</b> RM ${subtotal.toFixed(2)}</div>`;
}

/* ========== 多语言标签刷新（精简） ========== */
function refreshLabels(){
  document.getElementById('title-main').textContent=t('title_main');
  document.getElementById('title-sub').textContent=t('title_sub');
  document.getElementById('panel-order').textContent=t('order');
  document.getElementById('panel-cart').textContent=t('cart');
  document.getElementById('label-table').textContent=t('table');
  document.getElementById('takeaway-label').textContent=t('takeaway');
  document.getElementById('note-label').textContent=t('note_label');
  document.getElementById('btn-print').textContent=t('print');
  document.getElementById('btn-done').textContent=t('done');
  document.getElementById('kpi-orders-title').textContent=t('k_orders');
  document.getElementById('kpi-items-title').textContent=t('k_items');
  document.getElementById('kpi-sales-title').textContent=t('k_sales');
  document.getElementById('btn-view').textContent=t('tool_today');
  document.getElementById('btn-cat').textContent=t('tool_cat');
  document.getElementById('btn-csv').textContent=t('tool_csv');
  document.getElementById('btn-del').textContent=t('tool_del');
  document.getElementById('sum-wonton').textContent=t('cat_wonton');
  document.getElementById('tip-wonton').textContent=t('cat_wonton_tip');
  document.getElementById('sum-drinks').textContent=t('cat_drinks');
  document.getElementById('tip-drinks').textContent=t('cat_drinks_tip');
  document.getElementById('sum-auntie').textContent=t('cat_auntie');
  document.getElementById('tip-auntie').textContent=t('cat_auntie_tip');
  document.getElementById('sum-gx').textContent=t('cat_gx');
  document.getElementById('tip-gx').textContent=t('cat_gx_tip');
}

/* ========== 初始化 ========== */
function renderAll(){
  refreshLabels();
  renderCategory("cat-wonton", WONTON);
  renderCategory("cat-drinks", DRINKS);
  renderCategory("cat-auntie", AUNTIE);
  renderCategory("cat-guangxi", GUANGXI);
  renderCart();
}
function setLang(next){
  LANG = next;
  document.getElementById('btn-zh').classList.toggle('active', next==='zh');
  document.getElementById('btn-en').classList.toggle('active', next==='en');
  document.getElementById('btn-vi').classList.toggle('active', next==='vi');
  renderAll();
}
document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('btn-zh').addEventListener('click', ()=>setLang('zh'));
  document.getElementById('btn-en').addEventListener('click', ()=>setLang('en'));
  document.getElementById('btn-vi').addEventListener('click', ()=>setLang('vi'));
  renderAll();
});
</script>
</body>
</html>
